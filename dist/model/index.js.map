{"version":3,"sources":["model/index.js"],"names":[],"mappings":";;;;;;;;;;;;iBAuBU,IAAI;;;;mBArBE,KAAK;;;;;;sBAGF,QAAQ;;;;yBACL,WAAW;;;;;;oBAGhB,QAAQ;;;;sBACN,yBAAyB;;;;AAV5C,YAAY,CAAC;;;;;AAgBb,IAAI,GAAG,GAAG,oBAAO,YAAY,CAAE;AAC7B,MAAI,EAAE,OAAO;AACb,OAAK,EAAE,OAAO,EACf,CAAE,CAAC;;;AAIJ,SAAU,IAAI;MACR,QAAQ,EACR,MAAM,EACN,OAAO;;;;AAFP,gBAAQ,GAAG,oBAAO,GAAG;AACrB,cAAM,GAAG,oBAAO,QAAQ;AACxB,eAAO,GAAG,iBAAI,OAAO,CAAE,QAAQ,GAAC,GAAG,EAAE,MAAM,CAAE;;AAEjD,WAAG,CAAC,KAAK,CAAE,OAAO,CAAE,CAAC;AACrB,+BAAU,OAAO,CAAE,OAAO,CAAE,CAAC;;;eAEvB,kBAAK,KAAK,CAAE,IAAI,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,CAAE;;;;eACjD,kBAAK,KAAK,CAAE,MAAM,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,CAAE;;;;eACrC,kBAAK,KAAK,CAAE,QAAQ,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,CAAE;;;;eACvC,kBAAK,KAAK,CAAE,UAAU,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,CAAE;;;;eACzC,kBAAK,KAAK,CAAE,QAAQ,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,CAAE;;;;eACvC,kBAAK,KAAK,CAAE,EAAE,QAAQ,EAAE,UAAU,EAAE,CAAE;;;;;;;CAC7C;AACD,SAAS,KAAK,GAAG;AACf,yBAAU,UAAU,EAAE,CAAC;CACxB;;;;;;;;;QAUQ,IAAI,GAAJ,IAAI;;;QAAE,KAAK,GAAL,KAAK","file":"model/index.js","sourcesContent":["'use strict';\r\n// Load system modules\r\nimport url from 'url';\r\n\r\n// Load modules\r\nimport bunyan from 'bunyan';\r\nimport Mongorito from 'mongorito';\r\n\r\n// Load my modules\r\nimport Post from './post';\r\nimport config from '../../config/mongo.json';\r\n\r\n// Constant declaration\r\n\r\n\r\n// Module variables declaration\r\nlet log = bunyan.createLogger( {\r\n  name: 'model',\r\n  level: 'trace',\r\n} );\r\n\r\n\r\n// Module functions declaration\r\nfunction* open() {\r\n  let hostname = config.url;\r\n  let dbName = config.database;\r\n  let fullUrl = url.resolve( hostname+'/', dbName );\r\n\r\n  log.trace( fullUrl );\r\n  Mongorito.connect( fullUrl );\r\n\r\n  yield Post.index( 'id', { index: true, unique: true } );\r\n  yield Post.index( 'date', { index: true } );\r\n  yield Post.index( 'author', { index: true } );\r\n  yield Post.index( 'authorId', { index: true } );\r\n  yield Post.index( 'source', { index: true } );\r\n  yield Post.index( { location: '2dsphere' } );\r\n}\r\nfunction close() {\r\n  Mongorito.disconnect();\r\n}\r\n\r\n// Module class declaration\r\n\r\n\r\n// Module initialization (at first load)\r\n\r\n// Entry point\r\n\r\n// Exports\r\nexport { open, close };\r\n\r\n\r\n//  50 6F 77 65 72 65 64  62 79  56 6F 6C 6F 78"],"sourceRoot":"/source/"}